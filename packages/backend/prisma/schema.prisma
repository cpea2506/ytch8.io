// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "cockroachdb"
    url      = env("DATABASE_URL")
}

enum Role {
    Admin
    Player
}

model User {
    id          BigInt    @id(map: "primary") @default(autoincrement())
    username    String // use for login
    accountName String // use for display
    password    String
    role        Role      @default(Player)
    Age         Int
    Comment     Comment[]
}

model Game {
    id          BigInt    @id(map: "primary") @default(autoincrement())
    name        String
    description String
    authorName  String
    category    Category  @relation(fields: [categoryId], references: [id])
    categoryId  BigInt
    dateCreated DateTime  @default(now())
    downloadNum Int       @default(0)
    playedTime  Int       @default(0)
    Comment     Comment[]
}

model Comment {
    id          BigInt   @id(map: "primary") @default(autoincrement())
    Game        Game?    @relation(fields: [gameId], references: [id])
    gameId      BigInt?
    User        User?    @relation(fields: [userId], references: [id])
    userId      BigInt?
    content     String
    dateCreated DateTime
}

model DownloadDetail {
    id          BigInt   @id(map: "primary") @default(autoincrement())
    accountName String
    Date        DateTime @default(now())
}

model Category {
    id   BigInt @id(map: "primary") @default(autoincrement())
    name String
    age  Int
    Game Game[]
}
